<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="css/reset.css" type="text/css">
  <link rel="stylesheet" href="css/main.css" type="text/css">
  <link rel="stylesheet" href="css/swiper.min.css">
  <link rel="stylesheet" href="css/timeline.css">
  <script src="https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css" rel="stylesheet"/>
</head>
<body>
<div id="app">
  <div class="header">
    <p class="title">Coronavirus COVID-19 Global Timeline</p>
    <div class="update">
      <p>Last Update at 2/27/2020</p>
    </div>
    <div class="header-swiper-container right-header" style="top: 15px;right: 20%">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          通知1通知1通知1
        </div>
        <div class="swiper-slide">
          通知2通知2通知2
        </div>
        <div class="swiper-slide">
          通知3通知3通知3通知3通知3通知3通知3通知3
        </div>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="main-left">
      <div class="data-loop">
        <div class="chart-box" id="chart01"></div>
      </div>
      <div class="data-loop word-swiper-container">
        <div id="wordCloud01" class="wordCloud">
        </div>
        <div class="tab-box">
          <div class="tab-box-item active">Word Frequency</div>
          <div class="tab-box-item">News Topic</div>
        </div>
      </div>
    </div>
    <div class="main-middle">
      <div class="data-map">
        <div id="map">

        </div>
        <div class="map-data">
          <p>
            <span>Total Confirmed</span>
            <i style="color: red">93,234</i>
          </p>
          <p>
            <span>Total Deaths</span>
            <i style="color: #fff">2568</i>
          </p>
          <p>
            <span>Total Recovered</span>
            <i style="color: green">74,541</i>
          </p>
        </div>
        <div class="map-table">
          <p class="title">
            The accumulated list
            <span class="modulebox_hidebtn__QHdrj">
              <svg viewBox="0 0 1045 1024" version="1.1"
                   xmlns="http://www.w3.org/2000/svg" p-id="5501" width="16"
                   height="16"><path
                d="M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z"
                p-id="5502"></path>
              </svg>
            </span>
          </p>
          <div class="list_list__1k9GO">
            <div class="list_changeWordType__UR1_h">
              <span>Data: </span>
              <span class="list_item__1WHUy">
                <span>
                  <svg style="display: none" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                       p-id="3847" width="16" height="16"><path
                    d="M510.567403 63.852903c-246.7137 0-446.663336 199.949635-446.663336 446.663336s199.949635 446.663336 446.663336 446.663336S957.230738 757.229939 957.230738 510.516239 757.281103 63.852903 510.567403 63.852903L510.567403 63.852903zM510.567403 888.517238c-208.749875 0-378.000999-169.251124-378.000999-378.000999s169.251124-378.000999 378.000999-378.000999 378.000999 169.251124 378.000999 378.000999S719.317278 888.517238 510.567403 888.517238L510.567403 888.517238z"
                    p-id="3848" fill="#ffffff"></path></svg>
                  <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4081" width="16"
                       height="16"><path
                    d="M512.3 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m230.3 337.8L483.5 661c-15.9 15.9-41.7 15.9-57.6 0l-144-144c-15.9-15.9-15.9-41.7 0-57.6 15.9-15.9 41.7-15.9 57.6 0l115.2 115.2L685 344.2c15.9-15.9 41.7-15.9 57.6 0 15.9 15.9 15.9 41.7 0 57.6z"
                    p-id="4082" fill="#ffffff"></path></svg>
                  <span>China</span>
                </span>
              </span>
              <span class="list_item__1WHUy">
                <span>
                  <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3847" width="16"
                       height="16"><path
                    d="M510.567403 63.852903c-246.7137 0-446.663336 199.949635-446.663336 446.663336s199.949635 446.663336 446.663336 446.663336S957.230738 757.229939 957.230738 510.516239 757.281103 63.852903 510.567403 63.852903L510.567403 63.852903zM510.567403 888.517238c-208.749875 0-378.000999-169.251124-378.000999-378.000999s169.251124-378.000999 378.000999-378.000999 378.000999 169.251124 378.000999 378.000999S719.317278 888.517238 510.567403 888.517238L510.567403 888.517238z"
                    p-id="3848" fill="#ffffff"></path></svg>
                  <svg style="display: none" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                       p-id="4081" width="16" height="16"><path
                    d="M512.3 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m230.3 337.8L483.5 661c-15.9 15.9-41.7 15.9-57.6 0l-144-144c-15.9-15.9-15.9-41.7 0-57.6 15.9-15.9 41.7-15.9 57.6 0l115.2 115.2L685 344.2c15.9-15.9 41.7-15.9 57.6 0 15.9 15.9 15.9 41.7 0 57.6z"
                    p-id="4082" fill="#ffffff"></path></svg>
                  <span>Global</span>
                </span>
              </span>
            </div>
            <div class="list_listTable__1yV4j">
              <div style="position: relative; overflow: hidden; width: 100%; height: 100%;">
                <div
                  style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; overflow: scroll; margin-right: 2px;margin-left: -20px; margin-bottom: 0;">
                  <table class="list_table__2Nj-b">
                    <tbody>
                    <tr>
                      <th><span>No.</span></th>
                      <th><span>Place&nbsp;</span></th>
                      <th><span>Confirmed&nbsp;</span></th>
                      <th><span>Death&nbsp;</span></th>
                      <th><span>Recovered&nbsp;</span></th>
                    </tr>
                    <tr>
                      <td>1</td>
                      <td><span>Hubei</span></td>
                      <td>67800</td>
                      <td>3153</td>
                      <td>59882</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><span>Guangdong</span></td>
                      <td>1415</td>
                      <td>8</td>
                      <td>1332</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td><span>Henan</span></td>
                      <td>1274</td>
                      <td>22</td>
                      <td>1250</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td><span>Zhejiang</span></td>
                      <td>1238</td>
                      <td>1</td>
                      <td>1221</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td><span>Hunan</span></td>
                      <td>1018</td>
                      <td>4</td>
                      <td>1014</td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td><span>Anhui</span></td>
                      <td>990</td>
                      <td>6</td>
                      <td>984</td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td><span>Jiangxi</span></td>
                      <td>936</td>
                      <td>1</td>
                      <td>934</td>
                    </tr>
                    <tr>
                      <td>8</td>
                      <td><span>Shandong</span></td>
                      <td>768</td>
                      <td>7</td>
                      <td>752</td>
                    </tr>
                    <tr>
                      <td>9</td>
                      <td><span>Jiangsu</span></td>
                      <td>633</td>
                      <td>0</td>
                      <td>631</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td><span>Chongqing</span></td>
                      <td>577</td>
                      <td>6</td>
                      <td>570</td>
                    </tr>

                    </tbody>
                  </table>
                </div>
                <div style="position: absolute; height: 6px; right: 2px; bottom: 2px; left: 2px; border-radius: 3px;">
                  <div
                    style="position: relative; display: block; height: 100%; cursor: pointer; border-radius: inherit; background-color: rgba(0, 0, 0, 0.2); width: 0px;"></div>
                </div>
                <div style="position: absolute; width: 6px; right: 2px; bottom: 2px; top: 2px; border-radius: 3px;">
                  <div
                    style="position: relative; display: block; width: 100%; cursor: pointer; border-radius: inherit; background-color: rgba(0, 0, 0, 0.2); height: 208px; transform: translateY(0px);"></div>
                </div>
              </div>
            </div>
            <div style="display: none" class="list_listTable__1yV4j">
              <div style="position: relative; overflow: hidden; width: 100%; height: 100%;">
                <div
                  style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; overflow: scroll; margin-right: 2px;margin-left: -20px; margin-bottom: 0;">
                  <table class="list_table__2Nj-b">
                    <tbody>
                    <tr>
                      <th><span>No.&nbsp;</span></th>
                      <th><span>Place&nbsp;</span></th>
                      <th><span>Confirmed&nbsp;</span></th>
                      <th><span>Death&nbsp;</span></th>
                      <th><span>Recovered&nbsp;</span></th>
                    </tr>
                    <tr>
                      <td>1</td>
                      <td><span>China</span></td>
                      <td>81748</td>
                      <td>3283</td>
                      <td>73300</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><span>Italy</span></td>
                      <td>63927</td>
                      <td>6077</td>
                      <td>7432</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td><span>United States</span></td>
                      <td>43901</td>
                      <td>557</td>
                      <td>178</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td><span>Spain</span></td>
                      <td>35136</td>
                      <td>2311</td>
                      <td>3355</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td><span>Germany</span></td>
                      <td>29056</td>
                      <td>123</td>
                      <td>453</td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td><span>Iran</span></td>
                      <td>23049</td>
                      <td>1812</td>
                      <td>7913</td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td><span>France</span></td>
                      <td>20123</td>
                      <td>862</td>
                      <td>2207</td>
                    </tr>
                    <tr>
                      <td>8</td>
                      <td><span>Korea</span></td>
                      <td>9037</td>
                      <td>120</td>
                      <td>3507</td>
                    </tr>
                    <tr>
                      <td>9</td>
                      <td><span>Switzerland</span></td>
                      <td>8795</td>
                      <td>120</td>
                      <td>131</td>
                    </tr>
                    <tr>
                      <td>10</td>
                      <td><span>United Kingdom</span></td>
                      <td>6726</td>
                      <td>336</td>
                      <td>140</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div style="position: absolute; height: 6px; right: 2px; bottom: 2px; left: 2px; border-radius: 3px;">
                  <div
                    style="position: relative; display: block; height: 100%; cursor: pointer; border-radius: inherit; background-color: rgba(0, 0, 0, 0.2); width: 0px;"></div>
                </div>
                <div style="position: absolute; width: 6px; right: 2px; bottom: 2px; top: 2px; border-radius: 3px;">
                  <div
                    style="position: relative; display: block; width: 100%; cursor: pointer; border-radius: inherit; background-color: rgba(0, 0, 0, 0.2); height: 37px; transform: translateY(0px);"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="map-table map-table-title" style="display: none">
          <p class="title">
            The accumulated list
          </p>
        </div>
      </div>
    </div>
    <div class="main-left main-right">
      <div class="data-loop">
        <div class="chart-box" id="chart02"></div>

      </div>
      <div class="data-loop word-swiper-container">
        <div id="wordCloud02" class="wordCloud">
        </div>
        <div class="tab-box">
          <div class="tab-box-item active">Word Frequency</div>
          <div class="tab-box-item">Twitter Topic</div>
        </div>

      </div>
    </div>

  </div>
  <div class="data-line">
    <a class="play" href="javascript:;"></a>
    <a class="stop" href="javascript:;"></a>
    <div id='timeline-embed' style="width: 100%; height: 100%"></div>
  </div>
</div>
</body>
<script src="js/swiper.min.js"></script>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/echarts.js"></script>

<script src="js/d2wordCloud.js"></script>
<script src="js/main.js"></script>
<script src="js/timeline.js"></script>
<script src="js/map/map.js"></script>
<script type="text/javascript">
  var timeline_json = {

    // "title": {
    //   "media": {
    //     "url": "//www.flickr.com/photos/tm_10001/2310475988/",
    //     "caption": "Whitney Houston performing on her My Love is Your Love Tour in Hamburg.",
    //     "credit": "flickr/<a href='http://www.flickr.com/photos/tm_10001/'>tm_10001</a>"
    //   },
    //   "text": {
    //     "headline": "Whitney Houston<br/> 1963 - 2012",
    //     "text": "<p>Houston's voice caught the imagination of the world propelling her to superstardom at an early age becoming one of the most awarded performers of our time. This is a look into the amazing heights she achieved and her personal struggles with substance abuse and a tumultuous marriage.</p>"
    //   },
    //   "slide":{
    //     "background":"#000000"
    //   },
    // },
    "events": [
      {
        "media": {
          "url": "https://static01.nyt.com/images/2020/02/29/world/29virus-briefing8/merlin_169792431_7dd8ddcb-2f35-47a9-b57e-024ed42a8edb-superJumbo.jpg?quality=90&auto=webp",
          "caption": "Houston's mother and Gospel singer, Cissy Houston (left) and cousin Dionne Warwick.",
          "credit": "Cissy Houston photo:<a href='http://www.flickr.com/photos/11447043@N00/418180903/'>Tom Marcello</a><br/><a href='http://commons.wikimedia.org/wiki/File%3ADionne_Warwick_television_special_1969.JPG'>Dionne Warwick: CBS Television via Wikimedia Commons</a>"
        },
        "start_date": {
          "month": "2",
          "day": "1",
          "year": "2020"
        },
        "background": {
          "color": "#000000",
          "autolink": false
        },
        "unique_id": 'a',
        "group": "WHO",
      },
      {
        "media": {
          "url": "https://youtu.be/fSrO91XO1Ck",
          "caption": "",
          "credit": "<a href=\"http://unidiscmusic.com\">Unidisc Music</a>"
        },
        "start_date": {
          "month": "2",
          "day": "2",
          "year": "2020"
        },
        "group": "China",
        "text": {
          "headline": "First Recording",
          "text": "At the age of 15 Houston was featured on Michael Zager's song, Life's a Party."
        },
        "unique_id": 1
      },
      {
        "media": {
          "url": "https://youtu.be/fSrO91XO1Ck",
          "caption": "",
          "credit": "<a href=\"http://unidiscmusic.com\">Unidisc Music</a>"
        },
        "start_date": {
          "month": "2",
          "day": "3",
          "year": "2020"
        },
        "group": "United States",
        "text": {
          "headline": "First Recording",
          "text": "At the age of 15 Houston was featured on Michael Zager's song, Life's a Party."
        },
        "unique_id": 1
      },
      {
        "media": {
          "url": "https://youtu.be/fSrO91XO1Ck",
          "caption": "",
          "credit": "<a href=\"http://unidiscmusic.com\">Unidisc Music</a>"
        },
        "start_date": {
          "month": "2",
          "day": "4",
          "year": "2020"
        },
        "group": "Europe",
        "text": {
          "headline": "Coronavirus Updates: Trump Expands Travel Restrictions on Iran",
          "text": "At the age of 15 Houston was featured on Michael Zager's song, Life's a Party."
        },
        "unique_id": 1
      },
      {
        "media": {
          "url": "https://youtu.be/fSrO91XO1Ck",
          "caption": "",
          "credit": "<a href=\"http://unidiscmusic.com\">Unidisc Music</a>"
        },
        "start_date": {
          "month": "2",
          "day": "4",
          "year": "2020"
        },
        "group": "Asian",
        "text": {
          "headline": "Coronavirus Updates: Trump Expands Travel Restrictions on Iran",
          "text": "At the age of 15 Houston was featured on Michael Zager's song, Life's a Party."
        },
        "unique_id": 1
      },
      {
        "media": {
          "url": "https://youtu.be/fSrO91XO1Ck",
          "caption": "",
          "credit": "<a href=\"http://unidiscmusic.com\">Unidisc Music</a>"
        },
        "start_date": {
          "month": "2",
          "day": "4",
          "year": "2020"
        },
        "group": "Others",
        "text": {
          "headline": "Coronavirus Updates: Trump Expands Travel Restrictions on Iran",
          "text": "At the age of 15 Houston was featured on Michael Zager's song, Life's a Party."
        },
        "unique_id": 1
      }
    ]
  }; // replace make_the_json() with the JSON object you created
  // two arguments: the id of the Timeline container (no '#')
  // and the JSON object or an instance of TL.TimelineConfig created from
  // a suitable JSON object
  window.timeline = new TL.Timeline('timeline-embed', timeline_json
    // , {
    //     	language: "fr",
    //     	ga_property_id: "UA-27829802-4"
    //     }
  );
  var autoPlayTimer = null;
  var lineIndex = '';
  timeline.on('change', function (data) {
    lineIndex = data.unique_id;
    console.log(data)
  });

  function playTimeLine() {
    $('.data-line .stop').hide();
    $('.data-line .play').show();
    autoPlayTimer = setInterval(function () {
      if (lineIndex === timeline_json.events[timeline_json.events.length - 1].unique_id) {
        timeline.goToStart();
        // clearInterval(autoPlayTimer);
        // $('.data-line .play').hide();
        // $('.data-line .stop').show();
        // return false
      } else {
        timeline.goToNext();
      }
    }, 1000);

  };
  $('.data-line .stop').click(function () {
    playTimeLine();
  });
  $('.data-line .play').click(function () {
    clearInterval(autoPlayTimer);
    $('.data-line .play').hide();
    $('.data-line .stop').show();
  });
  playTimeLine();

</script>
</html>
